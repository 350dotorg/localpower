{% extends "rah/base.html" %}

{% block right_content %}
    <h1>Edit your Profile</h1>
    <div id="profile_edit_tabs" class="tabs">
        <ul>
            <li><a href="#account_tab">Account</a></li>
            <li><a href="#notifications_tab">Notifications</a></li>
        </ul>
        <div id="account_tab">
            <p>
                <a href="http://en.gravatar.com/" target="_blank">Change your avatar on gravatar.com</a><br/>
                <a href="{% url password_change %}">Change your password</a><br/>
                {% if profile.twitter_access_token %}
                    Your account is linked with twitter (<a href="{% url twitter_oauth_unauth %}">unlink</a>)
                {% else %}
                    <a id="link_with_twitter" href="{% url twitter_oauth_auth %}">Link your account with twitter</a>
                {% endif %}
            </p>
            <form id="profile_edit_form" action="" method="post" autocomplete="false">
                {% with account_form as form %}
                    {% include "rah/_overset_form.html" %}
                {% endwith %}
                {% with profile_form as form %}
                    {% include "rah/_overset_form.html" %}
                {% endwith %}
                <p><input type="submit" name="edit_account" value="Save profile" /></p>
                {% csrf_token %}
            </form>
        </div>
        <div id="notifications_tab">
            <form id="group_notifications_form" action="" method="post" autocomplete="false">
                {% with group_notification_form.notifications as field %}
                    <div id="team_notifications" class="form_row overset {% if field.errors %}error{% endif %}">
                        {{ field.label_tag }}
                        <div id="team_selectors" class="hidden">
                            <a class="selector select_all" href="">Select All</a> |
                            <a class="selector deselect_all" href="">Deselect All</a>
                        </div>
                        {{ field }}
                        {% if field.help_text %}
                            <div class="help_text">{{ field.help_text }}</div>
                        {% endif %}
                        {% if field.errors %}
                            <label class="error" for="{{ field.auto_id }}">
                                {% for error in field.errors %}
                                    {{ error }}
                                {% endfor %}
                            </label>
                        {% endif %}
                    </div>
                {% endwith %}
                <p><input type="submit" name="edit_group_notifications" value="Save notifications" /></p>
                {% csrf_token %}
            </form>
        </div>
    </div>
{% endblock %}

{% block js %}page_profile_edit{% endblock %}